<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>乙太幣 6h 預測｜專題展示（公開版）</title>

  <!-- ECharts -->
  <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>

  <style>
    /* 主題色（淺色） */
    :root {
      --bg:#ffffff;           /* 頁面背景 */
      --fg:#0f172a;           /* 主要文字 */
      --muted:#64748b;        /* 次要文字 */
      --card:#f8fafc;         /* 卡片背景 */
      --accent:#2563eb;       /* 重點色 */
      --border:rgba(148,163,184,.25);
    }
    /* 主題色（深色） */
    [data-theme="dark"]{
      --bg:#0b0f19;
      --fg:#e5e7eb;
      --muted:#94a3b8;
      --card:#0f172a;
      --accent:#60a5fa;
      --border:rgba(148,163,184,.25);
    }

    /* 讓全畫面都吃到背景色（修正兩側留白） */
    html, body {
      margin:0;
      min-height:100vh;            /* ← 關鍵 */
      background:var(--bg);
      color:var(--fg);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, 'Helvetica Neue', Arial;
    }

    .container { max-width:1200px; margin:0 auto; padding:16px; }
    .row { display:flex; gap:16px; flex-wrap:wrap; }
    .card {
      background:var(--card);
      border:1px solid var(--border);
      border-radius:16px;
      padding:16px;
      flex:1;
      min-width:280px;
    }
    .header { display:flex; align-items:center; justify-content:space-between; gap:12px; }
    .title { font-size:20px; font-weight:700; }
    .muted { color:var(--muted); }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', monospace; }
    .btn {
      border:1px solid var(--border);
      background:transparent;
      color:var(--fg);
      padding:8px 12px; border-radius:12px; cursor:pointer;
    }
    .btn.primary { border-color:var(--accent); }
    .grid2 { display:grid; grid-template-columns: repeat(2,minmax(0,1fr)); gap:12px; }
    .grid3 { display:grid; grid-template-columns: repeat(3,minmax(0,1fr)); gap:12px; }
    table.metrics { width:100%; border-collapse:collapse; }
    table.metrics th, table.metrics td { padding:8px 10px; border-bottom:1px solid var(--border); text-align:left; }
    a { color: var(--accent); }
  </style>
</head>

<body data-theme="light">
  <div class="container">
    <!-- 頁首：標題 + 操作 -->
    <div class="header">
      <div>
        <div class="title">乙太幣 6h 預測 · 專題展示（公開版）</div>
        <div class="muted">此頁可獨立部署（含範例資料）。有線上 API 時，右上角改 API Base 即可。</div>
      </div>
      <div style="display:flex; gap:8px; align-items:center;">
        <div class="muted mono">
          API：
          <input id="apiBase" class="mono"
                 style="width:280px; padding:6px; border-radius:8px; border:1px solid var(--border); background:transparent; color:var(--fg);"
                 value="" placeholder="（留空=用內建範例）" />
        </div>
        <button id="themeToggle" class="btn">切換：<span id="themeLabel">白</span> / 黑</button>
        <button id="refreshBtn" class="btn primary">重新整理</button>
        <a href="./index.html" class="btn">主頁</a>
        <a href="./indicators.html" class="btn">指標實驗室</a>
      </div>
    </div>

    <!-- 主圖 + KPI 卡片 -->
    <div class="row" style="margin-top:12px;">
      <div class="card" style="flex:2;">
        <div class="header" style="margin-bottom:8px;">
          <div class="title">價格與預測</div>
        </div>
        <div id="chart" style="height:420px;"></div>
      </div>
      <div class="card" style="flex:1;">
        <div class="grid2">
          <div><div class="muted">方向</div><div id="dir" style="font-size:28px; font-weight:800;">—</div></div>
          <div><div class="muted">預估漲跌幅</div><div id="delta" style="font-size:28px; font-weight:800;">—</div></div>
          <div><div class="muted">信心度</div><div id="conf" style="font-size:24px; font-weight:700;">—</div></div>
          <div><div class="muted">區間 (±)</div><div id="band" style="font-size:24px; font-weight:700;">—</div></div>
        </div>
        <div class="muted" style="margin-top:12px;">最新預測時間：<span id="predTs" class="mono">—</span></div>
        <div style="margin-top:12px;">
          <a id="tgButton" class="btn" href="https://t.me/eth6h_predict_bot" target="_blank">到 Telegram 訂閱預測</a>
        </div>
      </div>
    </div>

    <!-- 重要度 + 指標 -->
    <div class="row">
      <div class="card" style="flex:1;">
        <div class="title">模型重要度</div>
        <div id="impChart" style="height:300px;"></div>
      </div>
      <div class="card" style="flex:1;">
        <div class="title">最新指標</div>
        <div class="grid3" id="featGrid"></div>
      </div>
    </div>

    <!-- 模型資訊 -->
    <div class="row">
      <div class="card">
        <div class="title">模型資訊</div>
        <div id="modelInfo" class="mono" style="white-space:pre-wrap; margin-top:8px;"></div>
      </div>
    </div>

    <!-- 回測/混淆矩陣 -->
    <div class="row">
      <div class="card" style="flex:1;">
        <div class="title">最近 N 次預測回測</div>
        <div class="muted">資料來源：/data/backtest_sample.json（或你的 API） · N 由資料長度決定</div>
        <div id="cmChart" style="height:320px; margin-top:8px;"></div>
      </div>
      <div class="card" style="flex:1;">
        <div class="title">回測指標</div>
        <table class="metrics" id="btMetrics"></table>
      </div>
    </div>

    <div class="muted" style="text-align:center; font-size:12px; margin:24px auto;">
      Demo 使用 <a href="https://echarts.apache.org" target="_blank">Apache ECharts</a>。URL 參數：<span class="mono">?theme=dark&bot=USERNAME</span>
    </div>
  </div>

  <!-- 前端程式 -->
  <script src="./app.js"></script>
</body>
</html>
